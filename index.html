<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
    
    <script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Home page</title>
    <!-- <script type="text/javascript" src="main.js"></script> -->
    <script type="text/javascript" src="datatable3.json"></script>
    <link rel="stylesheet" type="text/css"
        href="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css" />

    <!-- <script type="text/javascript"charset="utf8" src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.js"></script> -->
 
</head>

<body>


    <div class="header">
        <div class="container">
            <div class="row">
                <div class="navbar navbar-expand-lg">
                    <div class="container-fluid">
                        <div class="col-lg-2">
                            <img class="logo" src="https://inrelay.com/static/media/logo-new.75790ceb.svg">
                        </div>
                        <div class="col-lg-8">
                            <ul>
                                <li><a class="active" href="#home">Home</a></li>
                                <li><a href="#blog">Blog</a></li>
                                <li><a href="#">Industries</a></li>

                                <li><a href="#about">About</a></li>
                                <li><a href="#">Pricing</a></li>
                                <li><a href="#">Contact</a></li>
                            </ul>
                        </div>
                        <div class="col-lg">


                            <button type="button" class="btn-login">LOGIN</button>
                        </div>

                    </div>
                </div>
            </div>

        </div>
    </div>




    <!--     
    
    <label for="show">Show:</label>
    <select name="show" id="show">
        <option id="ten">10</option>
        <option id="twentyfive">25</option>
        <option id="Fifty">50</option>
        <option id="hundread">100</option>
    </select> entries -->
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-6">
                <button onclick="showAllRows()" class="btn btn-outline-secondary show" style="width: 100%;">Show
                    All</button>
            </div>
            <div class="col-6">
                <button onclick="showLessRows()" class="btn btn-outline-secondary show" style="width: 100%;">Show
                    Less</button>
            </div>
        </div>
        <div>
            <pre>

    </pre>
</div>
        <br />
        <br />
        <div class="fixTableHead text-center">
            <input type="search" id="myInput" placeholder="Search.." class="form-control search-input"
                data-table="student-list" />
                <br>
            <table id="table" class="table table-striped mt32 student-list" style="width:100%">
                <!-- <thead> -->
                <tr id="head">
                    <th data-column="Student_id" data-order="desc">ID</th>
                    <th data-column="Age" data-order="desc">Age</th>
                    <th data-column="Gender" data-order="desc">Gender</th>
                    <th data-column="Grade" data-order="desc">Grade</th>
                    <th data-column="Employed" data-order="desc">Employed</th>
                </tr>
                <!-- </thead> -->

                <tbody id="tbody"></tbody>

            </table>
        </div>
        <button id="previousbutton" class="btn btn-primary">Previous</button>
        <button id="nextbutton" class="btn btn-primary">Next</button>




       
        <script >
            var fdata = [];
var sdata = [];
var search_data = [];
const pageSize = 10;
let curPage = 1;
           

            //         .......................................................................
            $(document).ready(function () {

                $.getJSON("datatable3.json",

                    function (data) {
                        for (i of data) {
                            fdata.push(i)
                        }
                        sdata = fdata.slice(20, 21);
                        console.log('sdata', sdata)
                        slice_data = fdata.splice(20, 1);
                        console.log('slice_data', slice_data)
                        console.log(Array.prototype.push.apply(sdata, fdata))
                        renderTable();
                        // searchdata();
                    });
                    // search(document);

            });




            // .............................................................................


            function showLessRows() {
                searchTable();
                // searchdata();
            }
            function showAllRows() {
                
                // console.log('fdata', fdata)
                var student = '';
                // search(sdata)
                $.each(sdata, function (key, value) {
                    student += '<tr>';
                    student += '<td>' +
                        value.Student_id + '</td>';

                    student += '<td>' +
                        value.Age + '</td>';

                    student += '<td>' +
                        value.Gender + '</td>';

                    student += '<td>' +
                        value.Grade + '</td>';

                    student += '<td>' +
                        value.Employed + '</td>';

                    student += '</tr>';
                })
                $("#tbody").empty();
                $('#tbody').append(student);
                var searchData = document.getElementById("myInput").value.toUpperCase();;
                // searchBox.addEventListener('keyup' ,function(){
                // var searchData = this.value;
                // searchData = searchData.toUpperCase();
    
                var tableSearch = document.getElementById('table');
                var all = tableSearch.getElementsByTagName('tr');
                // console.log(all);
                for(var i=0;i < all.length; i++){
                    var address_column = all[i].getElementsByTagName('td');
                    for(var j = 0 ; j<address_column.length; j++){
                        if(address_column[j]){
                            var address_value = address_column[j].innerHTML || address_column[j].textContent; 
                            address_value = address_value.toUpperCase();
                            if(address_value.indexOf(searchData) > -1){
                                all[i].style.display = '';
                                // console.log("found")
                                break;
                            }
                            else{
                                all[i].style.display = 'none';
                                // console.log("not found")
                            }
                        }
                    }
        
                }
                // })
                
            }

 // ............................................................................. 

            document.querySelectorAll('#table th').forEach(t => {
                t.addEventListener('click', sort, false);
            });

            function sort() {

                var column = $(this).data('column')
                var order = $(this).data('order')

                console.log("column was clicked", column, order);

                if (order == 'desc') {
                    $(this).data('order', "asc")
                    data = sdata.sort((a, b) => {
                        if (b['Student_id'] == '21') {
                            // console.log("if student id 21")
                            return 0;
                        }
                        // console.log(a[column]);
                        if (a[column] > b[column]) {
                            return sdata ? -1 : 1;

                        }
                    });
                    
                    renderTable();
                    // searchdata();
                }
                else if (order == 'asc') {
                    $(this).data('order', "desc")
                    data = sdata.sort((a, b) => {
                        if (b['Student_id'] == '21') {
                            // console.log(" else student id 21")
                            return 0;
                        }
                        if (a[column] < b[column]) {
                            return sdata ? -1 : 1;

                        }

                    });
                    renderTable();
                    // searchdata();
                }


            }



 // .............................................................................
            document.querySelector('#nextbutton').addEventListener('click', nextPage, false);
            document.querySelector('#previousbutton').addEventListener('click', previousPage, false);

            function previousPage() {
                if(document.getElementById("myInput").value != ''){
                    searchTable();
                }
                else{
                if (curPage > 1) curPage--;
                renderTable();
                // searchdata();
                }
            }
            function nextPage() {
                if(document.getElementById("myInput").value != ''){
                    console.log("in next searchtable")
                    searchTable();
                }
                else{
                if ((curPage * pageSize) < sdata.length) curPage++;
                // searchdata();
                renderTable();
                }
            }

            function renderTable() {
                // search(document);
                var student = '';

                sdata.filter((row, index) => {
                    let start = (curPage - 1) * pageSize;
                    let end = curPage * pageSize;
                    if (index >= start && index < end) return true;
                }).forEach(value => {
                    student += '<tr>';
                    student += '<td>' +
                        value.Student_id + '</td>';

                    student += '<td>' +
                        value.Age + '</td>';

                    student += '<td>' +
                        value.Gender + '</td>';

                    student += '<td>' +
                        value.Grade + '</td>';

                    student += '<td>' +
                        value.Employed + '</td>';

                    student += '</tr>';

                });
                

                // table.innerHTML = student;
                $("#tbody").empty();
                $('#tbody').append(student);
                // searchdata();
                // search(document);
                // console.log(student);

            }

 // .............................................................................
            var searchBox = document.getElementById("myInput");
            searchBox.addEventListener('change' ,searchTable, false)
            
            function searchTable(){
                var student = '';
    
    
            var searchData = this.value;
            sdata.filter((row, index) => {  
                             
                if(row.Student_id == searchData || row.Age == searchData || row.Gender == searchData || row.Grade == searchData || row.Employed == searchData){
                    search_data.push(row);
                    // console.log("search_data",search_data)   
                    // console.log("keys",Object.keys(search_data))  
                }
                // let start = (curPage - 1) * pageSize;
                //     let end = curPage * pageSize;
                //     if (index >= start && index < end)return true;
            });Object.keys(search_data).forEach(key=>{
                    student += '<tr>';
                    student += '<td>' +
                        search_data[key].Student_id + '</td>';

                    student += '<td>' +
                        search_data[key].Age + '</td>';

                    student += '<td>' +
                        search_data[key].Gender + '</td>';

                    student += '<td>' +
                        search_data[key].Grade + '</td>';

                    student += '<td>' +
                        search_data[key].Employed + '</td>';

                    student += '</tr>';

                });
                

                $("#tbody").empty();
                console.log("studentdata",student)
                $('#tbody').append(student);
                $('tr:gt(10)').hide();
    }
    





// var searchBox = document.getElementById("search");
// searchBox.addEventListener('keyup' ,function(){
//     var searchData = this.value;
//     searchData = searchData.toUpperCase();
//     // console.log(searchData);
//     var tableSearch = document.getElementById('tablesearch');
//     var all = tableSearch.getElementsByTagName('tr');
//     // console.log(all);
//     for(var i=0;i < all.length; i++){
//         var address_column = all[i].getElementsByTagName('td');
//         for(var j = 0 ; j<address_column.length; j++){
//             if(address_column[j]){
//                 var address_value = address_column[j].innerHTML || address_column[j].textContent; 
//                 address_value = address_value.toUpperCase();
//                 if(address_value.indexOf(searchData) > -1){
//                     all[i].style.display = '';
//                     // console.log("found")
//                     break;
//                 }else{
//                     all[i].style.display = 'none';
//                     // console.log("not found")
//                 }
    
//             }


//         }
        
//     }
// })
            // function search(document) {
            //     'use strict';

            //     var TableFilter = (function (myArray) {
            //         var search_input;

            //         function _onInputSearch(e) {
            //             search_input = e.target;
            //             var tables = document.getElementsByClassName(search_input.getAttribute('data-table'));
            //             myArray.forEach.call(tables, function (table) {
            //                 myArray.forEach.call(table.tBodies, function (tbody) {
            //                     myArray.forEach.call(tbody.rows, function (row) {
            //                         var text_content = row.textContent.toLowerCase();
            //                         var search_val = search_input.value.toLowerCase();
            //                         row.style.display = text_content.indexOf(search_val) > -1 ? '' : 'none';
            //                     });
            //                 });
            //             });
            //         }

            //         return {
            //             init: function () {
            //                 var inputs = document.getElementsByClassName('search-input');
            //                 myArray.forEach.call(inputs, function (input) {
            //                     input.oninput = _onInputSearch;
            //                 });
            //             }
            //         };
            //     })(Array.prototype);

            //     document.addEventListener('readystatechange', function () {
            //         if (document.readyState === 'complete') {
            //             TableFilter.init();
            //         }
            //     });
               

            // }
            // search(document);


















// var student = [];
// fetch("http://127.0.0.1:5500/datatable3.json")
// .then(response => {
//    return response.json();
// })
// .then(data => {
    
//     for(var i of data){
//       // var id = i.Student_id;
//       // var data = i.Grade
//       student.push(i);
//     }
// });

// var jsonData = student;
// console.log(jsonData);


// function createTable(jsonData){ 
//   $(document).ready(function(){
//    $('#table').dataTable({
//      data: jsonData,
//      columns: [
//        { data: 'meta.Student_id' ,'sType': 'string', "bVisible": true, "bSearchable": false},
//        { data: 'meta.Age', 'sType': 'string', 'bVisible': true },
//        { data: 'meta.Gender', 'sType': 'string', 'bVisible': true },
//        { data: 'meta.Grade', 'sType': 'string', 'bVisible': true },
//        { data: 'meta.Employed', 'sType': 'string', 'bVisible': true }
//      ]
//    });
//   });
//  }


// $(document).ready(function () {
//   $.ajax({
//       url : 'http://127.0.0.1:5500/datatable3.json',
//       type : 'POST',
//       dataType : 'json',
//       data: {
//         json: JSON.stringify(jsonData)
//     },
//       success : function(data) {
//           assignToEventsColumns(data);
//       }
//   });


// });
        </script>

    </div>
</body>

</html>

